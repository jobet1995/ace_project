{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags static %}

{% block body_class %}template-homepage{% endblock %}

{% block extra_css %}
<link rel="stylesheet" type="text/css" href="{% static 'css/home_page.css' %}">
{% endblock %}

{% block content %}
    {# Hero Section #}
    {% if page.hero_section %}
        {% for block in page.hero_section %}
            <section class="hero-section">
                <div class="hero-background">
                    {% if block.value.background_image %}
                        {% image block.value.background_image fill-1920x1080 as hero_image %}
                        <div class="hero-background" style="background-image: url('{{ hero_image.url }}');"></div>
                    {% endif %}
                </div>
                <div class="hero-content">
                    <h1>{{ block.value.headline }}</h1>
                    {% if block.value.subheadline %}
                        <p>{{ block.value.subheadline }}</p>
                    {% endif %}
                    {% if block.value.cta_text and block.value.cta_link %}
                        <div class="hero-buttons">
                            <a href="{{ block.value.cta_link }}" class="btn btn-primary btn-lg">{{ block.value.cta_text }}</a>
                        </div>
                    {% endif %}
                </div>
            </section>
        {% endfor %}
    {% endif %}

    {# About Preview #}
    {% if page.about_summary %}
        {% for block in page.about_summary %}
            <section class="about-section py-5">
                <div class="container">
                    <div class="about-content">
                        {% if block.value.image %}
                            {% image block.value.image fill-600x400 as about_image %}
                            <img src="{{ about_image.url }}" alt="About Global Ace Technology Inc">
                        {% endif %}
                        <div>
                            {{ block.value.summary_text|richtext }}
                        </div>
                    </div>
                </div>
            </section>
        {% endfor %}
    {% endif %}

    {# Services Overview #}
    {% if page.services_overview %}
        <section class="services-section py-5 bg-light">
            <div class="container">
                <div class="section-header mb-5 text-center">
                    <h2 class="display-5 fw-bold">Our Services</h2>
                    <p class="lead text-muted">Discover how we can help transform your business with cutting-edge technology solutions</p>
                </div>
                <div class="services-grid">
                    {% for block in page.services_overview %}
                        <div class="service-item">
                            {% if block.value.icon %}
                                {% image block.value.icon fill-80x80 as service_icon %}
                                <img src="{{ service_icon.url }}" alt="{{ block.value.title }}" class="service-icon">
                            {% else %}
                                <i class="bi bi-gear-wide-connected text-primary" style="font-size: 3rem;"></i>
                            {% endif %}
                            <h3>{{ block.value.title }}</h3>
                            <p>{{ block.value.description }}</p>
                            {% if block.value.link %}
                                <a href="{% pageurl block.value.link %}" class="service-link">Learn More</a>
                            {% endif %}
                        </div>
                    {% endfor %}
                </div>
            </div>
        </section>
    {% endif %}

    {# Industries Served #}
    {% if page.industries_served %}
        <section class="industries-section py-5">
            <div class="container">
                <div class="section-header mb-5 text-center">
                    <h2 class="display-5 fw-bold">Industries We Serve</h2>
                    <p class="lead text-muted">Our expertise spans across multiple sectors, delivering tailored solutions for each industry</p>
                </div>
                <div class="industries-grid">
                    {% for block in page.industries_served %}
                        <div class="industry-item text-center">
                            {% if block.value.logo_or_icon %}
                                {% image block.value.logo_or_icon fill-80x80 as industry_icon %}
                                <img src="{{ industry_icon.url }}" alt="{{ block.value.name }}" class="industry-icon">
                            {% else %}
                                <i class="bi bi-building text-primary" style="font-size: 3rem;"></i>
                            {% endif %}
                            <h3>{{ block.value.name }}</h3>
                            <p>{{ block.value.description }}</p>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </section>
    {% endif %}

    {# Case Studies #}
    {% if page.case_studies %}
        <section class="case-studies-section py-5 bg-light">
            <div class="container">
                <div class="section-header mb-5 text-center">
                    <h2 class="display-5 fw-bold">Featured Projects</h2>
                    <p class="lead text-muted">Explore our latest success stories and innovative solutions</p>
                </div>
                <div class="case-studies-grid">
                    {% for block in page.case_studies %}
                        <div class="case-study-item">
                            {% if block.value.project_image %}
                                {% image block.value.project_image fill-400x300 as project_image %}
                                <img src="{{ project_image.url }}" alt="{{ block.value.project_title }}" class="project-image">
                            {% endif %}
                            <h3>{{ block.value.project_title }}</h3>
                            <p>{{ block.value.short_description }}</p>
                            {% if block.value.project_link %}
                                <a href="{% pageurl block.value.project_link %}" class="case-study-link">View Case Study</a>
                            {% endif %}
                        </div>
                    {% endfor %}
                </div>
            </div>
        </section>
    {% endif %}

    {# Testimonials Slider #}
    {% if page.testimonials_slider %}
        <section class="testimonials-section py-5">
            <div class="container">
                <div class="section-header mb-5 text-center">
                    <h2 class="display-5 fw-bold">What Our Clients Say</h2>
                    <p class="lead text-muted">Don't just take our word for it - hear from our satisfied clients</p>
                </div>
                <div class="testimonials-container">
                    <div class="swiper testimonials-swiper">
                        <div class="swiper-wrapper">
                            {% for block in page.testimonials_slider %}
                                <div class="swiper-slide">
                                    <div class="testimonial-item">
                                        <blockquote>
                                            <p>{{ block.value.testimonial.quote }}</p>
                                        </blockquote>
                                        <footer>
                                            {% if block.value.testimonial.image %}
                                                {% image block.value.testimonial.image fill-60x60 as testimonial_image %}
                                                <img src="{{ testimonial_image.url }}" alt="{{ block.value.testimonial.name }}" class="testimonial-image">
                                            {% endif %}
                                            <div>
                                                <strong>{{ block.value.testimonial.name }}</strong>
                                                <span>{{ block.value.testimonial.role }}{% if block.value.testimonial.company %}, {{ block.value.testimonial.company }}{% endif %}</span>
                                            </div>
                                        </footer>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                        <div class="swiper-button-next"></div>
                        <div class="swiper-button-prev"></div>
                        <div class="swiper-pagination"></div>
                    </div>
                </div>
            </div>
        </section>
    {% endif %}

    {# Call to Action #}
    {% if page.call_to_action %}
        {% include "home/cta_streamfield.html" %}
    {% endif %}

    {# Latest News #}
    {% if page.latest_news %}
        {% include "home/latest_news_streamfield.html" %}
    {% endif %}
{% endblock %}

{% block extra_js %}
<!-- Swiper JS -->
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script type="text/javascript" src="{% static 'js/main.js' %}"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Initialize Swiper for testimonials
    var testimonialSwiper = new Swiper('.testimonials-swiper', {
        slidesPerView: 1,
        spaceBetween: 30,
        loop: true,
        autoplay: {
            delay: 5000,
            disableOnInteraction: false,
        },
        pagination: {
            el: '.testimonials-pagination',
            clickable: true,
        },
        navigation: {
            nextEl: '.testimonials-next',
            prevEl: '.testimonials-prev',
        },
        breakpoints: {
            576: {
                slidesPerView: 2,
            },
            768: {
                slidesPerView: 3,
            },
        },
    });
});
</script>
{% endblock %}