{% extends "base.html" %}
{% load static wagtailcore_tags wagtailimages_tags %}

{% block body_class %}template-homepage{% endblock %}

{% block extra_css %}
<!-- Bootstrap 5 CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
<!-- Swiper CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css">
<!-- Custom CSS -->
<link rel="stylesheet" type="text/css" href="{% static 'css/home_page.css' %}">
<style>
  /* Corporate styling with blue-gray palette */
  :root {
    --bs-blue-gray-100: #ECEFF1;
    --bs-blue-gray-200: #CFD8DC;
    --bs-blue-gray-300: #B0BEC5;
    --bs-blue-gray-400: #90A4AE;
    --bs-blue-gray-500: #78909C;
    --bs-blue-gray-600: #546E7A;
    --bs-blue-gray-700: #455A64;
    --bs-blue-gray-800: #37474F;
    --bs-blue-gray-900: #263238;
  }
  
  body {
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    color: var(--bs-blue-gray-800);
  }
  
  .hero-section {
    position: relative;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    color: white;
    background-size: cover;
    background-position: center;
  }

  .hero-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(38, 50, 56, 0.7);
  }

  .hero-content {
    position: relative;
    z-index: 2;
    max-width: 800px;
  }

  .section-bg {
    background-color: var(--bs-blue-gray-100);
  }
  
  .service-card, .industry-card, .project-card, .testimonial-card {
    transition: transform 0.3s, box-shadow 0.3s;
    height: 100%;
  }

  .service-card:hover, .industry-card:hover, .project-card:hover, .testimonial-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.1);
  }
  
  .stats-section {
    background: linear-gradient(135deg, var(--bs-blue-gray-700), var(--bs-blue-gray-900));
    color: white;
  }
  
  .stat-number {
    font-size: 2.5rem;
    font-weight: 700;
  }
  
  .stat-label {
    font-size: 1rem;
    text-transform: uppercase;
    letter-spacing: 1px;
  }
  
  .cta-section {
    background: linear-gradient(135deg, var(--bs-blue-gray-600), var(--bs-blue-gray-800));
    color: white;
  }
  
  .btn-primary {
    background-color: var(--bs-blue-gray-700);
    border-color: var(--bs-blue-gray-700);
  }
  
  .btn-primary:hover {
    background-color: var(--bs-blue-gray-900);
    border-color: var(--bs-blue-gray-900);
  }
  
  .btn-outline-primary {
    color: var(--bs-blue-gray-700);
    border-color: var(--bs-blue-gray-700);
  }
  
  .btn-outline-primary:hover {
    background-color: var(--bs-blue-gray-700);
    border-color: var(--bs-blue-gray-700);
  }
</style>
{% endblock %}

{% block content %}
  <!-- Hero Banner -->
  {% if page.hero_section %}
    {% for block in page.hero_section %}
      <section class="hero-section" id="hero">
        <div class="hero-overlay"></div>
        <div class="hero-content">
          <h1 class="display-3 fw-bold mb-3">{{ block.value.headline }}</h1>
          {% if block.value.subheadline %}
            <p class="lead mb-4">{{ block.value.subheadline }}</p>
          {% endif %}
          {% if block.value.cta_text and block.value.cta_link %}
            <a href="{{ block.value.cta_link }}" class="btn btn-primary btn-lg px-4 py-2">{{ block.value.cta_text }}</a>
          {% endif %}
        </div>
        {% if block.value.background_image %}
          {% image block.value.background_image fill-1920x1080 as bg_image %}
          <div class="hero-background" style="background-image: url('{{ bg_image.url }}');"></div>
        {% endif %}
      </section>
    {% endfor %}
  {% endif %}

  <!-- Services Overview -->
  {% if page.services_overview %}
    <section class="services-section py-5" id="services">
      <div class="container">
        <div class="row mb-5">
          <div class="col-12 text-center">
            <h2 class="display-5 fw-bold mb-3">Our Services</h2>
            <p class="lead text-muted">Discover how we can help transform your business with cutting-edge technology solutions</p>
          </div>
        </div>
        
        <div class="row row-cols-1 row-cols-md-3 g-4">
          {% for block in page.services_overview %}
            <div class="col">
              <div class="card service-card h-100 border-0 shadow-sm">
                <div class="card-body d-flex flex-column text-center">
                  <div class="service-icon-wrapper mb-4 d-flex justify-content-center">
                    {% if block.value.icon %}
                      {% image block.value.icon fill-80x80 as service_icon %}
                      <img src="{{ service_icon.url }}" alt="{{ block.value.title }}" class="img-fluid">
                    {% else %}
                      <!-- Default Bootstrap Icon -->
                      <i class="bi bi-gear-wide-connected text-primary" style="font-size: 3rem;"></i>
                    {% endif %}
                  </div>
                  <h3 class="card-title fw-bold">{{ block.value.title }}</h3>
                  <p class="card-text text-muted flex-grow-1">{{ block.value.description }}</p>
                  {% if block.value.link %}
                    <a href="{% pageurl block.value.link %}" class="btn btn-outline-primary mt-auto">Learn More</a>
                  {% endif %}
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    </section>
  {% endif %}

  <!-- About Summary -->
  {% if page.about_preview %}
    <section class="about-section py-5 section-bg" id="about">
      <div class="container">
        {% for block in page.about_preview %}
          <div class="row align-items-center">
            <div class="col-lg-6">
              <h2 class="display-5 fw-bold mb-4">About Global Ace Technology</h2>
              <div class="about-content">
                {{ block.value.summary_text|richtext }}
              </div>
              <a href="/about/" class="btn btn-primary">Learn More About Us</a>
            </div>
            {% if block.value.image %}
              <div class="col-lg-6 mt-4 mt-lg-0">
                {% image block.value.image width-600 class="img-fluid rounded shadow" %}
              </div>
            {% endif %}
          </div>
        {% endfor %}
      </div>
    </section>
  {% endif %}

  <!-- Industries Served -->
  {% if page.industries_served %}
    <section class="industries-section py-5" id="industries">
      <div class="container">
        <div class="row mb-5">
          <div class="col-12 text-center">
            <h2 class="display-5 fw-bold mb-3">Industries We Serve</h2>
            <p class="lead text-muted">Our expertise spans across multiple sectors, delivering tailored solutions for each industry</p>
          </div>
        </div>
        
        <div class="row row-cols-2 row-cols-md-4 g-4">
          {% for block in page.industries_served %}
            <div class="col">
              <div class="card industry-card h-100 border-0 shadow-sm text-center">
                <div class="card-body">
                  <div class="industry-icon-wrapper mb-3">
                    {% if block.value.logo_or_icon %}
                      {% image block.value.logo_or_icon fill-80x80 as industry_icon %}
                      <img src="{{ industry_icon.url }}" alt="{{ block.value.name }}" class="img-fluid">
                    {% else %}
                      <!-- Default Bootstrap Icon -->
                      <i class="bi bi-building text-primary" style="font-size: 3rem;"></i>
                    {% endif %}
                  </div>
                  <h3 class="card-title h5 fw-bold">{{ block.value.name }}</h3>
                  {% if block.value.description %}
                    <p class="card-text text-muted small">{{ block.value.description }}</p>
                  {% endif %}
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    </section>
  {% endif %}

  <!-- Case Studies / Projects Highlight -->
  {% if page.case_studies %}
    <section class="projects-section py-5 section-bg" id="projects">
      <div class="container">
        <div class="row mb-5">
          <div class="col-12 text-center">
            <h2 class="display-5 fw-bold mb-3">Featured Projects</h2>
            <p class="lead text-muted">Explore our successful implementations across various industries</p>
          </div>
        </div>
        
        <div class="row row-cols-1 row-cols-md-3 g-4">
          {% for block in page.case_studies %}
            <div class="col">
              <div class="card project-card h-100 border-0 shadow-sm">
                {% if block.value.project_image %}
                  {% image block.value.project_image fill-400x250 as project_image %}
                  <img src="{{ project_image.url }}" class="card-img-top" alt="{{ block.value.project_title }}">
                {% endif %}
                <div class="card-body d-flex flex-column">
                  <h3 class="card-title fw-bold">{{ block.value.project_title }}</h3>
                  {% if block.value.client_name %}
                    <p class="text-muted small">Client: {{ block.value.client_name }}</p>
                  {% endif %}
                  <p class="card-text flex-grow-1">{{ block.value.short_description }}</p>
                  {% if block.value.project_link %}
                    <a href="{% pageurl block.value.project_link %}" class="btn btn-outline-primary mt-auto">View Case Study</a>
                  {% endif %}
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    </section>
  {% endif %}

  <!-- Key Stats -->
  {% if page.key_stats %}
    <section class="stats-section py-5" id="stats">
      <div class="container">
        <div class="row text-center">
          {% for block in page.key_stats %}
            <div class="col-md-3 col-6 mb-4 mb-md-0">
              <div class="stat-item">
                <div class="stat-number">{{ block.value.number }}</div>
                <div class="stat-label">{{ block.value.label }}</div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    </section>
  {% endif %}

  <!-- Testimonials -->
  {% if page.testimonials_slider %}
    <section class="testimonials-section py-5" id="testimonials">
      <div class="container">
        <div class="row mb-5">
          <div class="col-12 text-center">
            <h2 class="display-5 fw-bold mb-3">What Our Clients Say</h2>
            <p class="lead text-muted">Don't just take our word for it - hear from our satisfied clients</p>
          </div>
        </div>
        
        <div class="row">
          <div class="col-12">
            <div class="swiper testimonials-swiper">
              <div class="swiper-wrapper">
                {% for block in page.testimonials_slider %}
                  <div class="swiper-slide">
                    <div class="card testimonial-card h-100 border-0 shadow-sm">
                      <div class="card-body d-flex flex-column">
                        <blockquote class="blockquote flex-grow-1">
                          <p class="testimonial-quote">"{{ block.value.testimonial.quote }}"</p>
                        </blockquote>
                        <footer class="mt-auto">
                          <div class="d-flex align-items-center">
                            <div class="testimonial-image-wrapper me-3">
                              {% if block.value.testimonial.image %}
                                {% image block.value.testimonial.image fill-60x60 class="rounded-circle" %}
                              {% else %}
                                <div class="bg-secondary rounded-circle d-flex align-items-center justify-content-center text-white" style="width: 60px; height: 60px;">
                                  <i class="bi bi-person-fill"></i>
                                </div>
                              {% endif %}
                            </div>
                            <div>
                              <div class="fw-bold">{{ block.value.testimonial.name }}</div>
                              {% if block.value.testimonial.role %}
                                <div class="small text-muted">{{ block.value.testimonial.role }}</div>
                              {% endif %}
                              {% if block.value.testimonial.company %}
                                <div class="small text-muted">{{ block.value.testimonial.company }}</div>
                              {% endif %}
                            </div>
                          </div>
                        </footer>
                      </div>
                    </div>
                  </div>
                {% endfor %}
              </div>
              <div class="swiper-pagination testimonials-pagination mt-4"></div>
              <div class="swiper-button-next testimonials-next"></div>
              <div class="swiper-button-prev testimonials-prev"></div>
            </div>
          </div>
        </div>
      </div>
    </section>
  {% endif %}

  <!-- Latest News or Insights -->
  {% if page.latest_news %}
    <section class="blog-section py-5 section-bg" id="news">
      <div class="container">
        {% for block in page.latest_news %}
          <div class="row mb-5">
            <div class="col-12 text-center">
              <h2 class="display-5 fw-bold mb-3">{{ block.value.title }}</h2>
              <p class="lead text-muted">Stay updated with our latest insights and industry news</p>
            </div>
          </div>
        {% endfor %}
        
        <!-- This would typically query the latest 3 BlogPage instances -->
        <div class="row row-cols-1 row-cols-md-3 g-4">
          <!-- Placeholder for blog posts - would be dynamically populated -->
          <div class="col">
            <div class="card h-100 border-0 shadow-sm">
              <div class="card-body">
                <h3 class="card-title">Latest Industry Insights</h3>
                <p class="card-text">Stay tuned for our latest articles on technology trends and business solutions.</p>
                <a href="/blog/" class="btn btn-outline-primary">View All Articles</a>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card h-100 border-0 shadow-sm">
              <div class="card-body">
                <h3 class="card-title">Technology Updates</h3>
                <p class="card-text">Learn about the latest developments in our technology stack and implementations.</p>
                <a href="/blog/" class="btn btn-outline-primary">View All Articles</a>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card h-100 border-0 shadow-sm">
              <div class="card-body">
                <h3 class="card-title">Company News</h3>
                <p class="card-text">Read about our company milestones, partnerships, and team achievements.</p>
                <a href="/blog/" class="btn btn-outline-primary">View All Articles</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  {% endif %}

  <!-- Call-To-Action -->
  {% if page.call_to_action %}
    <section class="cta-section py-5" id="contact">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-lg-8 text-center">
            {% for block in page.call_to_action %}
              <h2 class="display-5 fw-bold mb-3">{{ block.value.headline }}</h2>
              {% if block.value.subheadline %}
                <p class="lead mb-4">{{ block.value.subheadline }}</p>
              {% endif %}
              <a href="{{ block.value.cta_link }}" class="btn btn-light btn-lg px-4 py-2">{{ block.value.cta_text }}</a>
            {% endfor %}
          </div>
        </div>
      </div>
    </section>
  {% endif %}
{% endblock %}

{% block extra_js %}
<!-- Bootstrap 5 JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- Swiper JS -->
<script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Initialize Swiper for testimonials
    var testimonialSwiper = new Swiper('.testimonials-swiper', {
        slidesPerView: 1,
        spaceBetween: 30,
        loop: true,
        autoplay: {
            delay: 5000,
            disableOnInteraction: false,
        },
        pagination: {
            el: '.testimonials-pagination',
            clickable: true,
        },
        navigation: {
            nextEl: '.testimonials-next',
            prevEl: '.testimonials-prev',
        },
        breakpoints: {
            768: {
                slidesPerView: 2,
            },
            992: {
                slidesPerView: 3,
            },
        },
    });
});
</script>
{% endblock %}